"use strict";(self.webpackChunkneonwp=self.webpackChunkneonwp||[]).push([[5066],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return d}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),c=u(n),d=o,m=c["".concat(p,".").concat(d)]||c[d]||f[d]||l;return n?r.createElement(m,a(a({ref:t},s),{},{components:n})):r.createElement(m,a({ref:t},s))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,a=new Array(l);a[0]=c;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var u=2;u<l;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1657:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return f}});var r=n(7462),o=n(3366),l=(n(7294),n(3905)),a=["components"],i={sidebar_position:2,title:"\u4f7f\u7528Truffle (Using Truffle)"},p=void 0,u={unversionedId:"05Developing/03Deploying dApps/02Connecting to the Neon Proxy",id:"05Developing/03Deploying dApps/02Connecting to the Neon Proxy",title:"\u4f7f\u7528Truffle (Using Truffle)",description:"This page outlines a methodology for deploying and testing contracts in Neon EVM using the Truffle tool. This technique can be useful for personnel involved in the development and maintenance of Neon EVM.",source:"@site/docs/05Developing/03Deploying dApps/02Connecting to the Neon Proxy.md",sourceDirName:"05Developing/03Deploying dApps",slug:"/05Developing/03Deploying dApps/02Connecting to the Neon Proxy",permalink:"/neonwp/05Developing/03Deploying dApps/02Connecting to the Neon Proxy",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/05Developing/03Deploying dApps/02Connecting to the Neon Proxy.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"\u4f7f\u7528Truffle (Using Truffle)"},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528Remix (Using Remix)",permalink:"/neonwp/05Developing/03Deploying dApps/01iUsing Remix"},next:{title:"\u4f7f\u7528Hardhat (Using Hardhat)",permalink:"/neonwp/05Developing/03Deploying dApps/03Using Hardhat"}},s={},f=[{value:"\u76ee\u6807(The Goal)",id:"\u76ee\u6807the-goal",level:4},{value:"\u5b89\u88c5(Installation)",id:"\u5b89\u88c5installation",level:4},{value:"\u8bbe\u5907\u9700\u6c42(Requirements for your device)",id:"\u8bbe\u5907\u9700\u6c42requirements-for-your-device",level:5},{value:"\u5b89\u88c5Truffle (Installation of Truffle)",id:"\u5b89\u88c5truffle-installation-of-truffle",level:5},{value:"\u5b89\u88c5HDWalletProvider \u5e93(Installation of the HDWalletProvider library)",id:"\u5b89\u88c5hdwalletprovider-\u5e93installation-of-the-hdwalletprovider-library",level:5},{value:"\u5c06Truffle \u8fde\u63a5\u5230\u4ee3\u7406(Connecting Truffle to a Proxy)",id:"\u5c06truffle-\u8fde\u63a5\u5230\u4ee3\u7406connecting-truffle-to-a-proxy",level:4},{value:"\u914d\u7f6e(Configuration)",id:"\u914d\u7f6econfiguration",level:4},{value:"\u7f16\u8bd1\u5408\u7ea6(Compiling Contracts)",id:"\u7f16\u8bd1\u5408\u7ea6compiling-contracts",level:4},{value:"\u8fd0\u884c\u8fc1\u79fb (Running Migrations)",id:"\u8fd0\u884c\u8fc1\u79fb-running-migrations",level:4},{value:"\u6d4b\u8bd5\u5408\u7ea6(Testing Contracts)",id:"\u6d4b\u8bd5\u5408\u7ea6testing-contracts",level:4},{value:"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e3e\u4f8b(Example of configuration file settings)",id:"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e3e\u4f8bexample-of-configuration-file-settings",level:4},{value:"\u793a\u4f8b\u6587\u4ef6(Example Project\uff09",id:"\u793a\u4f8b\u6587\u4ef6example-project",level:4}],c={toc:f};function d(e){var t=e.components,n=(0,o.Z)(e,a);return(0,l.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"This page outlines a methodology for deploying and testing contracts in Neon EVM using the Truffle tool. This technique can be useful for personnel involved in the development and maintenance of Neon EVM."),(0,l.kt)("p",null,"\u672c\u9875\u9610\u8ff0\u4f7f\u7528 Truffle \u5de5\u5177\u5728 Neon EVM \u4e2d\u90e8\u7f72\u548c\u6d4b\u8bd5\u5408\u7ea6\u7684\u65b9\u6cd5\u3002\u8be5\u6280\u672f\u5bf9\u4e8e\u53c2\u4e0e Neon EVM \u5f00\u53d1\u548c\u7ef4\u62a4\u7684\u4eba\u5458\u975e\u5e38\u6709\u7528\u3002"),(0,l.kt)("p",null,"It should be noted that Ethereum contracts can also be successfully deployed in Neon EVM using Remix in manual mode. Since Remix has not so many capabilities, it turned out to be not very convenient in software development, and therefore we provide developers a more advanced methodology using Truffle."),(0,l.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u4ee5\u592a\u574a\u5408\u7ea6\u4e5f\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u6a21\u5f0f\u4f7f\u7528 Remix\u90e8\u7f72\u5728 Neon EVM \u4e2d\u3002\u7531\u4e8e Remix \u6ca1\u6709\u90a3\u4e48\u591a\u529f\u80fd\uff0c\u6240\u4ee5\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u4e0d\u662f\u5f88\u65b9\u4fbf\uff0c\u56e0\u6b64\u6211\u4eec\u4e3a\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u4e86\u4f7f\u7528 Truffle \u7684\u66f4\u9ad8\u7ea7\u7684\u65b9\u6cd5\u3002"),(0,l.kt)("h4",{id:"\u76ee\u6807the-goal"},"\u76ee\u6807(The Goal)"),(0,l.kt)("p",null,"Our main goal with Truffle is to make it easier for developers to deploy and debug contacts in Neon EVM."),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528 Truffle \u7684\u4e3b\u8981\u76ee\u6807\u662f\u8ba9\u5f00\u53d1\u4eba\u5458\u66f4\u5bb9\u6613\u5728 Neon EVM \u4e2d\u90e8\u7f72\u548c\u8c03\u8bd5\u667a\u80fd\u5408\u7ea6\u3002"),(0,l.kt)("p",null,"With Truffle, you get:",(0,l.kt)("br",{parentName:"p"}),"\n","\u4f7f\u7528Truffle\uff0c\u60a8\u53ef\u4ee5:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Simple setting of configuration parameters.",(0,l.kt)("br",{parentName:"p"}),"\n","\u7b80\u5355\u8bbe\u7f6e\u53c2\u6570\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"An easy process of deploying and debugging contacts in the network.",(0,l.kt)("br",{parentName:"p"}),"\n","\u65b9\u4fbf\u5730\u5728\u7f51\u7edc\u4e2d\u90e8\u7f72\u548c\u8c03\u8bd5\u667a\u80fd\u5408\u7ea6\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Automated deploying and running tests.",(0,l.kt)("br",{parentName:"p"}),"\n","\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u6d4b\u8bd5\u3002"))),(0,l.kt)("h4",{id:"\u5b89\u88c5installation"},"\u5b89\u88c5(Installation)"),(0,l.kt)("h5",{id:"\u8bbe\u5907\u9700\u6c42requirements-for-your-device"},"\u8bbe\u5907\u9700\u6c42(Requirements for your device)"),(0,l.kt)("p",null,"The following softwares must be installed on your device:",(0,l.kt)("br",{parentName:"p"}),"\n","\u60a8\u7684\u8bbe\u5907\u4e0a\u5fc5\u987b\u5b89\u88c5\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"NodeJS v8.9.4 or later (NodeJS v8.9.4 \u6216\u66f4\u9ad8\u7248\u672c)"),(0,l.kt)("li",{parentName:"ul"},"Web3 v1.2.0 or later (Web3 v1.2.0 \u6216\u66f4\u9ad8\u7248\u672c)")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Although this tutorial uses the Ubuntu platform, the instructions provided can be applied to other Linux platforms."),(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a\u867d\u7136\u672c\u6559\u7a0b\u4f7f\u7528\u7684\u662f Ubuntu \u5e73\u53f0\uff0c\u4f46\u63d0\u4f9b\u7684\u8bf4\u660e\u53ef\u4ee5\u9002\u7528\u4e8e\u5176\u4ed6 Linux \u5e73\u53f0\u3002")),(0,l.kt)("h5",{id:"\u5b89\u88c5truffle-installation-of-truffle"},"\u5b89\u88c5Truffle (Installation of Truffle)"),(0,l.kt)("p",null,"If Truffle is already installed on your device, you can skip this section and move on to the next one. For those just getting started, you need to go through this section."),(0,l.kt)("p",null,"\u5982\u679c\u60a8\u7684\u8bbe\u5907\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86 Truffle\uff0c\u60a8\u53ef\u4ee5\u8df3\u8fc7\u5e76\u7ee7\u7eed\u4e0b\u4e00\u4e2a\u90e8\u5206\u3002\u5bf9\u4e8e\u65b0\u624b\uff0c\u60a8\u9700\u8981\u9605\u8bfb\u672c\u8282\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: This page is just a quickstart. To go into much detail here, you can see the ",(0,l.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/docs/truffle/getting-started/installation"},"Truffle documentation"),"."),(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a\u6b64\u9875\u9762\u53ea\u662f\u4e00\u4e2a\u5feb\u901f\u5165\u95e8\u3002\u8981\u5728\u6b64\u5904\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u60a8\u53ef\u4ee5\u67e5\u770b ",(0,l.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/docs/truffle/getting-started/installation"},"Truffle \u6587\u6863"),"\u3002")),(0,l.kt)("p",null,"Create a new directory for your Truffle project:",(0,l.kt)("br",{parentName:"p"}),"\n","\u4e3a\u60a8\u7684 Truffle \u9879\u76ee\u521b\u5efa\u4e00\u4e2a\u65b0\u76ee\u5f55:  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ mkdir <project name>\n$ cd <project name>\n")),(0,l.kt)("p",null,"Install Truffle:",(0,l.kt)("br",{parentName:"p"}),"\n","\u5b89\u88c5Truffle\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm install truffle\n")),(0,l.kt)("p",null,"Initialize the project directory by running the following command:",(0,l.kt)("br",{parentName:"p"}),"\n","\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u521d\u59cb\u5316\u9879\u76ee\u76ee\u5f55:  "),(0,l.kt)("p",null,"Once this operation is completed, you will have a project structure with the following items:"),(0,l.kt)("p",null,"\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u60a8\u5c06\u62e5\u6709\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u7684\u9879\u76ee\u7ed3\u6784\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"contracts/")," --- Directory for Solidity contracts.  ")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"contract/")," --- Solidity \u5408\u7ea6\u76ee\u5f55\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"migrations/")," --- Directory for scriptable deployment files.  ")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"migrations/")," --- \u53ef\u7f16\u8f91\u811a\u672c\u7684\u90e8\u7f72\u6587\u4ef6\u4e4b\u76ee\u5f55\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"test/")," --- Directory for test files for testing your contracts.  ")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"test/")," --- \u7528\u4e8e\u6d4b\u8bd5\u5408\u7ea6\u7684\u6d4b\u8bd5\u6587\u4ef6\u4e4b\u76ee\u5f55\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"truffle-config.js")," --- Truffle configuration file.  ")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," --- Truffle\u914d\u7f6e\u6587\u4ef6\u3002"),(0,l.kt)("p",null,"You can run truffle compile, truffle migrate and truffle test to compile your contracts, deploy them to the network, and run their associated unit tests."),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u8fd0\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle compile\u3001truffle migrate")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle test")," \u6765\u7f16\u8bd1\u4f60\u7684\u5408\u7ea6\uff0c\u5c06\u5b83\u4eec\u90e8\u7f72\u5230\u7f51\u7edc\u4e0a\uff0c\u5e76\u8fd0\u884c\u5b83\u4eec\u76f8\u5173\u5355\u5143\u6d4b\u8bd5\u3002"),(0,l.kt)("h5",{id:"\u5b89\u88c5hdwalletprovider-\u5e93installation-of-the-hdwalletprovider-library"},"\u5b89\u88c5HDWalletProvider \u5e93(Installation of the HDWalletProvider library)"),(0,l.kt)("p",null,"HD Wallet-enabled Web3 provider (HDWalletProvider) is a standalone library. One of its functions is signing transactions with private keys. Since the Neon EVM proxy does not store private keys, it cannot sign transactions. Therefore, during debugging contracts, the HDWalletProvider library is used to sign transactions for addresses derived from a 12 or 24 word mnemonic."),(0,l.kt)("p",null,"\u53ef\u652f\u6301 HD Wallet \u7684 Web3 \u4f9b\u5e94\u65b9 (HDWalletProvider) \u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u5e93\u3002\u5b83\u7684\u529f\u80fd\u4e4b\u4e00\u662f\u4f7f\u7528\u79c1\u94a5\u7b7e\u7f72\u4ea4\u6613\u3002\u7531\u4e8e Neon EVM \u4ee3\u7406\u4e0d\u5b58\u50a8\u79c1\u94a5\uff0c\u6240\u4ee5\u65e0\u6cd5\u7b7e\u7f72\u4ea4\u6613\u3002\u56e0\u6b64\uff0c\u5728\u8c03\u8bd5\u5408\u7ea6\u671f\u95f4\uff0cHDWalletProvider \u5e93\u7528\u4e8e\u5bf9\u6e90\u81ea 12 \u6216 24 \u5b57\u52a9\u8bb0\u8bcd\u7684\u5730\u5740\u7684\u4ea4\u6613\u8fdb\u884c\u7b7e\u540d\u3002"),(0,l.kt)("p",null,"By default, the Truffle installation does not provide the HDWalletProvider library. If during the installation of Truffle none of the applications also required the HDWalletProvider library to be installed, you need to install it separately."),(0,l.kt)("p",null,"Truffle \u5b89\u88c5\u65f6\u9ed8\u8ba4\u4e0d\u63d0\u4f9b HDWalletProvider \u5e93\u3002\u5982\u679c\u5728\u5b89\u88c5 Truffle \u671f\u95f4\u6ca1\u6709\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u4e5f\u9700\u8981\u5b89\u88c5 HDWalletProvider \u5e93\uff0c\u5219\u9700\u8981\u5355\u72ec\u5b89\u88c5\u5b83\u3002"),(0,l.kt)("p",null,"Install the HDWalletProvider library:",(0,l.kt)("br",{parentName:"p"}),"\n","\u5b89\u88c5\u4ee3\u7801:  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm install @truffle/hdwallet-provider\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," To go into much detail here, you can see the ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@truffle/hdwallet-provider"},"official documentation"),"."),(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a\u8981\u8be6\u7ec6\u4e86\u89e3\u8fd9\u91cc\uff0c\u60a8\u53ef\u4ee5\u67e5\u770b",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@truffle/hdwallet-provider"},"\u5b98\u65b9\u6587\u6863"),"\u3002")),(0,l.kt)("h4",{id:"\u5c06truffle-\u8fde\u63a5\u5230\u4ee3\u7406connecting-truffle-to-a-proxy"},"\u5c06Truffle \u8fde\u63a5\u5230\u4ee3\u7406(Connecting Truffle to a Proxy)"),(0,l.kt)("p",null,"To connect Truffle to a proxy on ",(0,l.kt)("inlineCode",{parentName:"p"},"node.js"),", the ",(0,l.kt)("inlineCode",{parentName:"p"},"eth_accoun"),"ts method from the ",(0,l.kt)("a",{parentName:"p",href:"https://eth.wiki/json-rpc/API"},"Ethereum JSON RPC API")," set is required. This method allows serving a list of 20 Bytes-addresses owned by a client. Since the Neon EVM proxy does not support the ",(0,l.kt)("inlineCode",{parentName:"p"},"eth_accounts")," method required to connect Truffle , the HDWalletProvider library is used to function as this method. The connection is configured in ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle-config.js.")),(0,l.kt)("p",null,"\u8981\u5c06 Truffle \u8fde\u63a5\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"node.js")," \u4e0a\u7684\u4ee3\u7406\uff0c\u9700\u8981 ",(0,l.kt)("a",{parentName:"p",href:"https://eth.wiki/json-rpc/API"},"Ethereum JSON RPC API")," \u96c6\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"eth_accounts")," \u65b9\u6cd5\u3002\u6b64\u65b9\u6cd5\u5141\u8bb8\u670d\u52a1\u5ba2\u6237\u7aef\u62e5\u6709\u7684 20 \u5b57\u8282\u5730\u5740\u5217\u8868\u3002\u7531\u4e8e Neon EVM \u4ee3\u7406\u4e0d\u652f\u6301\u8fde\u63a5 Truffle \u6240\u9700\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"eth_accounts")," \u65b9\u6cd5\uff0c\u56e0\u6b64 ",(0,l.kt)("inlineCode",{parentName:"p"},"HDWalletProvider")," \u5e93\u7528\u4f5c\u6b64\u65b9\u6cd5\u3002\u8fde\u63a5\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," \u4e2d\u914d\u7f6e\u3002"),(0,l.kt)("p",null,"The configuration file is publicly available and therefore, ",(0,l.kt)("inlineCode",{parentName:"p"},"word mnemonic")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"private key")," contained in the file are also publicly available. This makes it possible to use this data by the library. HDWalletProvider obtains ",(0,l.kt)("inlineCode",{parentName:"p"},"word mnemonic")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"private key")," from the configuration file and uses this data to sign transactions before sending them to the proxy."),(0,l.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\u662f\u516c\u5f00\u7684\uff0c\u56e0\u6b64\u6587\u4ef6\u4e2d\u5305\u542b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"\u52a9\u8bb0\u8bcd"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"\u79c1\u94a5"),"\u4e5f\u662f\u516c\u5f00\u7684\u3002\u5982\u6b64\uff0c\u5e93\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e\u3002 HDWalletProvider \u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6",(0,l.kt)("inlineCode",{parentName:"p"},"\u52a9\u8bb0\u8bcd"),"\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"\u79c1\u94a5"),"\uff0c\u5e76\u5728\u5c06\u4ea4\u6613\u53d1\u9001\u5230\u4ee3\u7406\u4e4b\u524d\u4f7f\u7528\u6b64\u6570\u636e\u5bf9\u4ea4\u6613\u8fdb\u884c\u7b7e\u540d\u3002"),(0,l.kt)("p",null,'This method of configuration is convenient for debug mode, but not suitable for work in real conditions. Since the development process uses "test" wallets, this data is not of any value.'),(0,l.kt)("p",null,'\u8fd9\u79cd\u914d\u7f6e\u65b9\u5f0f\u5f88\u65b9\u4fbf\u8c03\u8bd5\uff0c\u4f46\u4e0d\u9002\u5408\u5b9e\u9645\u5de5\u4f5c\u3002\u7531\u4e8e\u5f00\u53d1\u8fc7\u7a0b\u4f7f\u7528"\u6d4b\u8bd5"\u94b1\u5305\uff0c\u56e0\u6b64\u8fd9\u4e9b\u6570\u636e\u6ca1\u6709\u4efb\u4f55\u4ef7\u503c\u3002'),(0,l.kt)("h4",{id:"\u914d\u7f6econfiguration"},"\u914d\u7f6e(Configuration)"),(0,l.kt)("p",null,"Your configuration file is called ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," and is located at the root of your project directory. This file is a JavaScript file and can execute any code necessary to create your configuration."),(0,l.kt)("p",null,"\u60a8\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"truffle-config.js"),"\uff0c\u4f4d\u4e8e\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u3002\u8be5\u6587\u4ef6\u662f\u4e00\u4e2a JavaScript \u6587\u4ef6\uff0c\u53ef\u4ee5\u6267\u884c\u521b\u5efa\u914d\u7f6e\u6240\u9700\u7684\u4efb\u4f55\u4ee3\u7801\u3002"),(0,l.kt)("h4",{id:"\u7f16\u8bd1\u5408\u7ea6compiling-contracts"},"\u7f16\u8bd1\u5408\u7ea6(Compiling Contracts)"),(0,l.kt)("p",null,"All of your contracts are located in your project's ",(0,l.kt)("inlineCode",{parentName:"p"},"contracts/")," directory. To compile a Truffle project, change to the root of the directory where the project is located and run the following command:"),(0,l.kt)("p",null,"\u60a8\u6240\u6709\u667a\u80fd\u5408\u7ea6\u90fd\u4f4d\u4e8e\u9879\u76ee\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"contracts/")," \u76ee\u5f55\u4e2d\u3002\u8981\u7f16\u8bd1 Truffle\u9879\u76ee\uff0c\u8bf7\u5207\u6362\u5230\u9879\u76ee\u6240\u5728\u6839\u76ee\u5f55\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle compile\n")),(0,l.kt)("p",null,"Upon first run, all contracts will be compiled. Upon subsequent runs, only those contracts will be compiled that have changed since the last compilation."),(0,l.kt)("p",null,"\u9996\u6b21\u8fd0\u884c\u65f6\uff0c\u6240\u6709\u5408\u7ea6\u90fd\u5c06\u88ab\u7f16\u8bd1\u3002\u5728\u968f\u540e\u7684\u8fd0\u884c\u4e2d\uff0c\u53ea\u6709\u90a3\u4e9b(\u81ea\u4e0a\u6b21\u7f16\u8bd1\u540e)\u53d1\u751f\u53d8\u5316\u7684\u5408\u7ea6\u624d\u4f1a\u88ab\u7f16\u8bd1\u3002"),(0,l.kt)("p",null,"If you want to re-compile all contracts, run the above command with the ",(0,l.kt)("inlineCode",{parentName:"p"},"\\--all")," option:"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u91cd\u65b0\u7f16\u8bd1\u6240\u6709\u5408\u7ea6\uff0c\u8bf7\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"\\--all")," \u9009\u9879\u8fd0\u884c\u4e0a\u8ff0\u547d\u4ee4\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle compile --all\n")),(0,l.kt)("h4",{id:"\u8fd0\u884c\u8fc1\u79fb-running-migrations"},"\u8fd0\u884c\u8fc1\u79fb (Running Migrations)"),(0,l.kt)("p",null,"Migration is used to deploy your contracts to the network. This operation is performed using JavaScript files contained in the ",(0,l.kt)("inlineCode",{parentName:"p"},"migration/")," directory. Migrations are simply a set of managed deployment scripts."),(0,l.kt)("p",null,"\u8fc1\u79fb\u4f1a\u5c06\u60a8\u7684\u5408\u7ea6\u90e8\u7f72\u5230\u7f51\u7edc\u3002\u6b64\u64cd\u4f5c\u4f7f\u7528\u5305\u542b\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"migration/")," \u76ee\u5f55\u4e2d\u7684 JavaScript \u6587\u4ef6\u6267\u884c\u3002\u8fc1\u79fb\u53ea\u662f\u4e00\u7ec4\u6258\u7ba1\u90e8\u7f72\u811a\u672c\u3002"),(0,l.kt)("p",null,"Run migrations to deploy contracts:",(0,l.kt)("br",{parentName:"p"}),"\n","\u8fd0\u884c\u8fc1\u79fb\u6765\u90e8\u7f72\u5408\u7ea6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle migrate\n")),(0,l.kt)("p",null,"This will run all migrations located within the ",(0,l.kt)("inlineCode",{parentName:"p"},"migrations/")," directory. If your migrations were previously run successfully, truffle migrate will start execution from the last migration that was run, running only newly created migrations. If no new migrations exist, truffle migrate won't perform any action."),(0,l.kt)("p",null,"\u8fd9\u4f1a\u8fd0\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"migrations/")," \u76ee\u5f55\u4e2d\u7684\u6240\u6709\u8fc1\u79fb\u3002\u5982\u679c\u60a8\u7684\u8fc1\u79fb\u4e4b\u524d\u5df2\u6210\u529f\u8fd0\u884c\uff0c\u5219 truffle migrate \u5c06\u4ece\u4e0a\u6b21\u8fd0\u884c\u7684\u8fc1\u79fb\u5f00\u59cb\u6267\u884c\uff0c\u4ec5\u8fd0\u884c\u65b0\u521b\u5efa\u7684\u8fc1\u79fb\u3002\u5982\u679c\u6ca1\u6709\u65b0\u7684\u8fc1\u79fb\uff0c\u5219 truffle migrate \u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002"),(0,l.kt)("p",null,"If you need to run all migrations from the beginning, instead of running from the last completed migration, you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"\\--reset")," option:"),(0,l.kt)("p",null,"\u5982\u679c\u60a8\u9700\u8981\u4ece\u5934\u5f00\u59cb\u8fd0\u884c\u6240\u6709\u8fc1\u79fb\uff0c\u800c\u4e0d\u662f\u4ece\u4e0a\u6b21\u5b8c\u6210\u7684\u8fc1\u79fb\u8fd0\u884c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"\\--reset")," \u9009\u9879\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle migrate --reset\n")),(0,l.kt)("p",null,"The full set of options that you can use during running migrations are listed in the page with ",(0,l.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/truffle-commands#migrate"},"truffle migrate")," command."),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728\u8fd0\u884c\u8fc1\u79fb\u671f\u95f4\u4f7f\u7528\u7684\u5168\u5957\u9009\u9879\uff0c\u90fd\u53ef\u4ee5\u5728",(0,l.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/truffle-commands#migrate"},"truffle migrate")," \u547d\u4ee4\u9875\u9762\u4e2d\u67e5\u770b\u3002"),(0,l.kt)("h4",{id:"\u6d4b\u8bd5\u5408\u7ea6testing-contracts"},"\u6d4b\u8bd5\u5408\u7ea6(Testing Contracts)"),(0,l.kt)("p",null,"All test files should be located in the ",(0,l.kt)("inlineCode",{parentName:"p"},"test/")," directory.",(0,l.kt)("br",{parentName:"p"}),"\n","\u6240\u6709\u6d4b\u8bd5\u6587\u4ef6\u90fd\u5e94\u4f4d\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"test/")," \u76ee\u5f55\u4e2d\u3002"),(0,l.kt)("p",null,"To run all tests by default, simply run:",(0,l.kt)("br",{parentName:"p"}),"\n","\u53ea\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u4ee3\u7801\u5c31\u53ef\u4ee5\u8fd0\u884c\u6240\u6709\u9ed8\u8ba4\u6d4b\u8bd5:  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle test\n")),(0,l.kt)("p",null,"To run only one file from the entire test suite or a specific file that is not in ",(0,l.kt)("inlineCode",{parentName:"p"},"test/"),", you need to specify the full name of that file:"),(0,l.kt)("p",null,"\u53ea\u60f3\u8fd0\u884c\u6574\u4e2a\u6d4b\u8bd5\u5957\u4ef6\u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u6216\u4e0d\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"test/")," \u4e2d\u7684\u7279\u5b9a\u6587\u4ef6\uff0c\u60a8\u5c31\u9700\u8981\u6307\u5b9a\u8be5\u6587\u4ef6\u7684\u5168\u540d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ truffle test <./path/file.js>\n")),(0,l.kt)("p",null,"The full set of options that you can use during testing are listed in the page with ",(0,l.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/truffle-commands#migrate"},"truffle migrate")," command."),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728\u6d4b\u8bd5\u671f\u95f4\u4f7f\u7528\u7684\u5168\u5957\u9009\u9879\uff0c\u90fd\u53ef\u4ee5\u5728",(0,l.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/truffle-commands#migrate"},"truffle migrate")," \u547d\u4ee4\u9875\u9762\u4e2d\u67e5\u770b\u3002"),(0,l.kt)("h4",{id:"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e3e\u4f8bexample-of-configuration-file-settings"},"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e3e\u4f8b(Example of configuration file settings)"),(0,l.kt)("p",null,"The example of the configuration file for connecting Truffle to a proxy using the one-way library on Node.js:"),(0,l.kt)("p",null,"\u4f7f\u7528 Node.js \u4e0a\u7684\u5355\u5411\u5e93(one-way library)\uff0c\u5c06 Truffle \u8fde\u63a5\u5230\u4ee3\u7406\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-node"},'const Web3 = require("web3");\nconst HDWalletProvider = require("@truffle/hdwallet-provider");\n\nWeb3.providers.HttpProvider.prototype.sendAsync = Web3.providers.HttpProvider.prototype.send\n\nconst provider = new Web3.providers.HttpProvider("https://proxy.devnet.neonlabs.org/solana");\n\nconst privateKey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"; // Specify your private key here\n\nmodule.exports = {\n  networks: {\n    neonlabs: {\n      provider: () => {\n        return new HDWalletProvider(\n          privateKey,\n          provider,\n        );\n      },\n      from: "xxxxxxxxxxxxxxxxxxxxxxxxxxxx", // Specify public key corresponding to private key defined above\n      network_id: "*",\n      gas: 3000000000,\n      gasPrice: 443065000000,\n    }\n  }\n};\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: If both mnemonic and private keys are provided, the mnemonic is used."),(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a\u5982\u679c\u63d0\u4f9b\u52a9\u8bb0\u8bcd\u548c\u79c1\u94a5\uff0c\u5219\u4f7f\u7528\u52a9\u8bb0\u8bcd\u3002")),(0,l.kt)("p",null,"Use next command to deploy contracts using ",(0,l.kt)("strong",{parentName:"p"},"neonlabs")," network:",(0,l.kt)("br",{parentName:"p"}),"\n","\u4f7f\u7528\u4e0b\u4e00\u4e2a\u547d\u4ee4,\u5728",(0,l.kt)("strong",{parentName:"p"},"neonlabs"),"\u90e8\u7f72\u5408\u7ea6:  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"truffle migrate --network neonlabs\n")),(0,l.kt)("h4",{id:"\u793a\u4f8b\u6587\u4ef6example-project"},"\u793a\u4f8b\u6587\u4ef6(Example Project\uff09"),(0,l.kt)("p",null,"You can obtain example Truffle project from here",(0,l.kt)("br",{parentName:"p"}),"\n","\u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u67e5\u770b\u793a\u4f8b\u6587\u4ef6\uff1a"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/neonlabsorg/examples/tree/main/simple-erc20-truffle"},"https://github.com/neonlabsorg/examples/tree/main/simple-erc20-truffle")))}d.isMDXComponent=!0}}]);