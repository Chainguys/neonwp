"use strict";(self.webpackChunkneonwp=self.webpackChunkneonwp||[]).push([[9789],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),h=r,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4085:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],p={sidebar_position:4,title:"\u5411Neon EVM\u8fc1\u79fbdApps (Migrating dApps to the Neon EVM)"},l=void 0,s={unversionedId:"05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM",id:"05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM",title:"\u5411Neon EVM\u8fc1\u79fbdApps (Migrating dApps to the Neon EVM)",description:"The purpose of this document is to demonstrate to Ethereum users how easily their dApps can be ported to the Neon EVM. Using Neon Swap as an example, we wil show you how to run dApps on Solana without any software code changes.",source:"@site/docs/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM.md",sourceDirName:"05Developing/03Deploying dApps",slug:"/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM",permalink:"/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"\u5411Neon EVM\u8fc1\u79fbdApps (Migrating dApps to the Neon EVM)"},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528Hardhat (Using Hardhat)",permalink:"/neonwp/05Developing/03Deploying dApps/03Using Hardhat"},next:{title:"\u4e0eSPL\u4ee3\u5e01\u4ea4\u4e92 (Interacting with SPL Tokens)",permalink:"/neonwp/05Developing/03Deploying dApps/05Interacting with SPL Tokens"}},c={},d=[{value:"\u7b2c 1 \u9636\u6bb5 - \u5728 Neon EVM \u73af\u5883\u4e2d\u90e8\u7f72\u5408\u7ea6\uff08Stage 1. Deploying Contracts in a Neon EVM Environment\uff09",id:"\u7b2c-1-\u9636\u6bb5---\u5728-neon-evm-\u73af\u5883\u4e2d\u90e8\u7f72\u5408\u7ea6stage-1-deploying-contracts-in-a-neon-evm-environment",level:4},{value:"\u4e3a\u90e8\u7f72\u5408\u7ea6\u7684\u66f4\u6539(Changes for Deploying Contracts)",id:"\u4e3a\u90e8\u7f72\u5408\u7ea6\u7684\u66f4\u6539changes-for-deploying-contracts",level:5},{value:"\u7b2c 2 \u9636\u6bb5 - \u68c0\u67e5\u90e8\u7f72\u7684\u5408\u7ea6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c (Stage 2. Check if the Deployed Contracts Work Correctly)",id:"\u7b2c-2-\u9636\u6bb5---\u68c0\u67e5\u90e8\u7f72\u7684\u5408\u7ea6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c-stage-2-check-if-the-deployed-contracts-work-correctly",level:4},{value:"\u8fd0\u884cUniswap-v2-core \u5957\u4ef6\u7684\u66f4\u6539 (Changes for Running the Uniswap-v2-core Test Suite)",id:"\u8fd0\u884cuniswap-v2-core-\u5957\u4ef6\u7684\u66f4\u6539-changes-for-running-the-uniswap-v2-core-test-suite",level:5},{value:"\u7b2c 3 \u9636\u6bb5 - \u90e8\u7f72\u5408\u7ea6\u63a5\u53e3(Stage 3. Deploying the Uniswap Interface)",id:"\u7b2c-3-\u9636\u6bb5---\u90e8\u7f72\u5408\u7ea6\u63a5\u53e3stage-3-deploying-the-uniswap-interface",level:4},{value:"NeonSwap \u63a5\u53e3\u7684\u66f4\u6539 (Changes for the NeonSwap Interface)",id:"neonswap-\u63a5\u53e3\u7684\u66f4\u6539-changes-for-the-neonswap-interface",level:5}],u={toc:d};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The purpose of this document is to demonstrate to Ethereum users how easily their dApps can be ported to the Neon EVM. Using Neon Swap as an example, we wil show you how to run dApps on ",(0,o.kt)("a",{parentName:"p",href:"https://docs.solana.com/introduction"},(0,o.kt)("em",{parentName:"a"},"Solana"))," without any software code changes."),(0,o.kt)("p",null,"\u672c\u6587\u6863\u7684\u76ee\u7684\u662f\u5411\u4ee5\u592a\u574a\u7528\u6237\u5c55\u793a\u4ed6\u4eec\u7684 dApp \u53ef\u4ee5\u591a\u4e48\u5bb9\u6613\u5730\u79fb\u690d\u5230 Neon EVM\u3002\u4ee5 Neon Swap \u4e3a\u4f8b\uff0c\u6211\u4eec\u5c06\u5411\u60a8\u5c55\u793a\u5982\u4f55\u5728 ",(0,o.kt)("a",{parentName:"p",href:"https://docs.solana.com/introduction"},(0,o.kt)("em",{parentName:"a"},"Solana")),"\u4e0a\u8fd0\u884c dApp\uff0c\u800c\u65e0\u9700\u66f4\u6539\u4efb\u4f55\u4ee3\u7801\u3002"),(0,o.kt)("p",null,"Every dApp includes a contract and a software supporting that contract. In the Neon EVM, all dApps are deployed via Neon proxies. To deploy a dApp, it needs to send a request to a proxy, after which the proxy will automatically deploy contracts of the dApp in the Neon EVM environment. Contracts are loaded into a chain, and the software is deployed on a separate server for providing users interaction with these contracts."),(0,o.kt)("p",null,"\u6bcf\u4e2a dApp \u90fd\u5305\u542b\u4e00\u4e2a\u5408\u7ea6\u548c\u652f\u6301\u8be5\u5408\u7ea6\u7684\u8f6f\u4ef6\u3002\u5728 Neon EVM \u4e2d\uff0c\u6240\u6709 dApp \u90fd\u901a\u8fc7 Neon \u4ee3\u7406\u90e8\u7f72\u3002\u90e8\u7f72 dApp \u9700\u8981\u5411\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u81ea\u52a8\u5728 Neon EVM \u73af\u5883\u4e2d\u90e8\u7f72 dApp \u7684\u5408\u7ea6\u3002\u5408\u7ea6\u88ab\u52a0\u8f7d\u5230\u94fe\u4e0a\uff0c\u8f6f\u4ef6\u5219\u90e8\u7f72\u5728\u5355\u72ec\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u6765\u4e3a\u7528\u6237\u4e0e\u8fd9\u4e9b\u5408\u7ea6\u4ea4\u4e92\u3002"),(0,o.kt)("p",null,"In this description we show you how you can port Uniswap services to the Neon EVM environment. Since we do not have native keys to Uniswap, we will use a fork of Uniswap-V2 called NeonSwap."),(0,o.kt)("p",null,"\u5728\u672c\u63cf\u8ff0\u4e2d\uff0c\u6211\u4eec\u5c06\u5411\u60a8\u5c55\u793a\u5982\u4f55\u5c06 Uniswap \u670d\u52a1\u79fb\u690d\u5230 Neon EVM \u73af\u5883\u3002\u7531\u4e8e\u6211\u4eec\u6ca1\u6709 Uniswap \u7684\u672c\u5730\u5bc6\u94a5\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 Uniswap-V2 \u7684\u4e00\u4e2a\u5206\u652f\uff0c\u79f0\u4e3a NeonSwap\u3002"),(0,o.kt)("p",null,"Migrating dApps to the Neon EVM is done in three stages:",(0,o.kt)("br",{parentName:"p"}),"\n","\u8fc1\u79fb\u9700\u8981\u52063\u9636\u6bb5\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Stage 1 - Deploying contracts in a Neon EVM environment",(0,o.kt)("br",{parentName:"p"}),"\n","\u7b2c 1 \u9636\u6bb5 - \u5728 Neon EVM \u73af\u5883\u4e2d\u90e8\u7f72\u5408\u7ea6")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Stage 2 - Checking if the deployed contracts work correctly",(0,o.kt)("br",{parentName:"p"}),"\n","\u7b2c 2 \u9636\u6bb5 - \u68c0\u67e5\u90e8\u7f72\u7684\u5408\u7ea6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Stage 3 - Deploying the interface of the contracts",(0,o.kt)("br",{parentName:"p"}),"\n","\u7b2c 3 \u9636\u6bb5 - \u90e8\u7f72\u5408\u7ea6\u63a5\u53e3"))),(0,o.kt)("h4",{id:"\u7b2c-1-\u9636\u6bb5---\u5728-neon-evm-\u73af\u5883\u4e2d\u90e8\u7f72\u5408\u7ea6stage-1-deploying-contracts-in-a-neon-evm-environment"},"\u7b2c 1 \u9636\u6bb5 - \u5728 Neon EVM \u73af\u5883\u4e2d\u90e8\u7f72\u5408\u7ea6\uff08Stage 1. Deploying Contracts in a Neon EVM Environment\uff09"),(0,o.kt)("p",null,"Using NeonSwap as an example, we can demonstrate that no changes to software serving contracts are required to port dApps. Changes are made only to those components that are necessary for its operation on he Neon EVM."),(0,o.kt)("p",null,"\u4ee5 NeonSwap \u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660e\u8fc1\u79fb dApp \u4e0d\u9700\u8981\u66f4\u6539\u8f6f\u4ef6\u670d\u52a1\u5408\u7ea6\u3002\u53ea\u9700\u8981\u66f4\u6539\u5728 Neon EVM \u4e0a\u8fd0\u884c\u6240\u9700\u7684\u7ec4\u4ef6\u3002"),(0,o.kt)("p",null,"The contracts are built by a typical Solidity compiler used in Ethereum. After compilation, all the necessary contracts are deployed on the Neon EVM using a Web3 proxy. This proxy provides a standard interface that Ethereum utilities and tools can use."),(0,o.kt)("p",null,"\u8fd9\u4e9b\u5408\u7ea6\u7531\u4ee5\u592a\u574a\u4e2d\u4f7f\u7528\u7684\u5178\u578b Solidity \u7f16\u8bd1\u5668\u6784\u5efa\u3002\u7f16\u8bd1\u540e\uff0c\u6240\u6709\u5fc5\u8981\u7684\u5408\u7ea6\u90fd\u4f7f\u7528 Web3 \u4ee3\u7406\u90e8\u7f72\u5728 Neon EVM \u4e0a\u3002\u8be5\u4ee3\u7406\u63d0\u4f9b\u4e86\u4ee5\u592a\u574a\u5b9e\u7528\u7a0b\u5e8f\u548c\u5de5\u5177\u53ef\u4ee5\u4f7f\u7528\u7684\u6807\u51c6\u63a5\u53e3\u3002"),(0,o.kt)("p",null,"For example, Uniswap includes the following list of contracts that need to be deployed:"),(0,o.kt)("p",null,"\u4f8b\u5982\uff0cUniswap \u5305\u62ec\u4ee5\u4e0b\u9700\u8981\u90e8\u7f72\u7684\u5408\u7ea6\u5217\u8868\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Governance  "),(0,o.kt)("li",{parentName:"ul"},"Uniswap-v2-periphery  "),(0,o.kt)("li",{parentName:"ul"},"Multicall  ")),(0,o.kt)("h5",{id:"\u4e3a\u90e8\u7f72\u5408\u7ea6\u7684\u66f4\u6539changes-for-deploying-contracts"},"\u4e3a\u90e8\u7f72\u5408\u7ea6\u7684\u66f4\u6539(Changes for Deploying Contracts)"),(0,o.kt)("p",null,"When deploying Uniswap in Neon EVM contracts, we made the following changes to them:"),(0,o.kt)("p",null,"\u5728 Neon EVM \u5408\u7ea6\u4e2d\u90e8\u7f72 Uniswap \u65f6\uff0c\u6211\u4eec\u5bf9\u5176\u8fdb\u884c\u4e86\u4ee5\u4e0b\u66f4\u6539\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The timeout value was increased.",(0,o.kt)("br",{parentName:"p"}),"\n","\u8d85\u65f6\u503c\u589e\u52a0")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The number of repeated requests for transaction recipes was increased:",(0,o.kt)("br",{parentName:"p"}),"\n","\u4ea4\u6613\u56de\u6267\u7684\u91cd\u590d\u8bf7\u6c42\u6b21\u6570\u589e\u52a0\uff1a"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// The call  \n    wait factoryV1.createExchange(WETHPartner.address, overrides)\n// was replaced with  \n    let id = await factoryV1.createExchange(WETHPartner.address, overrides) let receipt = await provider.waitForTransaction(id.hash, 3)\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Added the ",(0,o.kt)("inlineCode",{parentName:"li"},"deploy contracts()")," method.",(0,o.kt)("br",{parentName:"li"}),"\u6dfb\u52a0",(0,o.kt)("inlineCode",{parentName:"li"},"deploy contracts()")," \u65b9\u6cd5")),(0,o.kt)("p",null,"Due to the fact that we did not have native keys to Uniswap, we had to change the addresses of the following uploaded contracts:"),(0,o.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u6ca1\u6709 Uniswap \u7684\u672c\u5730\u5bc6\u94a5\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u66f4\u6539\u4ee5\u4e0b\u4e0a\u4f20\u5408\u7ea6\u7684\u5730\u5740\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"UNI_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"TIMELOCK_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"GOVERNANCE_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"MULTICALL_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"MIGRATOR_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"FACTORY_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"ROUTER1_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"ROUTER_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"V1_FACTORY_ADDRESS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"WETH_ADDRESS"))),(0,o.kt)("h4",{id:"\u7b2c-2-\u9636\u6bb5---\u68c0\u67e5\u90e8\u7f72\u7684\u5408\u7ea6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c-stage-2-check-if-the-deployed-contracts-work-correctly"},"\u7b2c 2 \u9636\u6bb5 - \u68c0\u67e5\u90e8\u7f72\u7684\u5408\u7ea6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c (Stage 2. Check if the Deployed Contracts Work Correctly)"),(0,o.kt)("p",null,"Contract health checks are performed in a real chain, not in a test environment, which is fully managed."),(0,o.kt)("p",null,"\u5408\u7ea6\u7684\u5065\u5eb7\u68c0\u67e5\u5728\u771f\u6b63\u7684\u94fe\u4e2d\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5728\u5b8c\u5168\u6258\u7ba1\u7684\u6d4b\u8bd5\u73af\u5883\u4e2d\u6267\u884c\u3002"),(0,o.kt)("p",null,"Unlike the test environment, in a real working chain the range of test operations cannot be performed in full. (For example, operations such as generating a block with a specified number of transactions are excluded.) In a chain, all operations rely on real-time, and a user checking the contracts cannot influence the block generation."),(0,o.kt)("p",null,"\u4e0e\u6d4b\u8bd5\u73af\u5883\u4e0d\u540c\uff0c\u5728\u771f\u5b9e\u7684\u5de5\u4f5c\u94fe\u4e2d\uff0c\u6d4b\u8bd5\u64cd\u4f5c\u7684\u8303\u56f4\u4e0d\u80fd\u5168\u90e8\u6267\u884c\u3002\uff08\u4f8b\u5982\uff0c\u4e0d\u5305\u62ec\u751f\u6210\u5177\u6709\u6307\u5b9a\u4ea4\u6613\u6570\u91cf\u7684\u5757\u7b49\u64cd\u4f5c\u3002\uff09\u5728\u94fe\u4e2d\uff0c\u6240\u6709\u64cd\u4f5c\u90fd\u4f9d\u8d56\u4e8e\u5b9e\u65f6\uff0c\u7528\u6237\u68c0\u67e5\u5408\u7ea6\u4e0d\u80fd\u5f71\u54cd\u5757\u7684\u751f\u6210\u3002"),(0,o.kt)("p",null,"To test NeonSwap, we use the entire set of Uniswap-v2-core tests available in their repository for testing on Ethereum. The method of running these tests has been changed. Before running the tests, it is indicated that the deployment of contracts, calls to their methods, as well as testing takes place not in the test framework, but in the real blockchain."),(0,o.kt)("p",null,"\u4e3a\u4e86\u6d4b\u8bd5 NeonSwap\uff0c\u6211\u4eec\u4f7f\u7528\u5b58\u50a8\u5e93\u4e2d\u53ef\u7528\u7684\u6574\u5957 Uniswap-v2-core\uff0c\u5728\u4ee5\u592a\u574a\u4e0a\u8fdb\u884c\u6d4b\u8bd5\u3002\u8fd0\u884c\u8fd9\u4e9b\u6d4b\u8bd5\u7684\u65b9\u6cd5\u5df2\u66f4\u6539\u3002\u5728\u8fd0\u884c\u6d4b\u8bd5\u4e4b\u524d\uff0c\u9700\u8981\u8868\u660e\uff1a\u5408\u7ea6\u7684\u90e8\u7f72\u3001\u65b9\u6cd5\u7684\u8c03\u7528\u4ee5\u53ca\u6d4b\u8bd5\u4e0d\u662f\u5728\u6d4b\u8bd5\u6846\u67b6\u4e2d\u8fdb\u884c\uff0c\u800c\u662f\u5728\u771f\u6b63\u7684\u533a\u5757\u94fe\u4e2d\u8fdb\u884c\u3002"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"For testing, we use an unmanaged environment. However, in Uniswap-v2-core tests (in contracts), there are sections of program code that contain environment management. In these pieces, we were able to successfully replace the environment management to expectation for a reaction from a chain. That is, where the block is to be generated, a delay is set. Then an action is performed and the reaction of the contract is evaluated; namely, whether it meets the expectation or not. At the same time, we believe that the number of blocks produced may be different."),(0,o.kt)("p",{parentName:"blockquote"},"\u5bf9\u4e8e\u6d4b\u8bd5\uff0c\u6211\u4eec\u4f7f\u7528\u975e\u6258\u7ba1\u73af\u5883\u3002\u4f46\u662f\uff0c\u5728 Uniswap-v2-core \u6d4b\u8bd5\u4e2d\uff08\u5728\u5408\u7ea6\u4e2d\uff09\uff0c\u6709\u90e8\u5206\u7a0b\u5e8f\u4ee3\u7801\u5305\u542b\u73af\u5883\u7ba1\u7406\u3002\u5728\u8fd9\u4e9b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u80fd\u591f\u6210\u529f\u5730\u5c06\u73af\u5883\u7ba1\u7406\u66ff\u6362\u4e3a\u5bf9\u94fe\u7684\u671f\u671b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u8981\u751f\u6210\u5757\u7684\u5730\u65b9\u8bbe\u7f6e\u5ef6\u8fdf\u3002\u7136\u540e\u6267\u884c\u4e00\u4e2a\u52a8\u4f5c\u5e76\u8bc4\u4f30\u5408\u7ea6\u7684\u53cd\u5e94\uff1b\u5373\u5176\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u540c\u65f6\uff0c\u6211\u4eec\u8ba4\u4e3a\u51fa\u5757\u7684\u6570\u91cf\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002")),(0,o.kt)("p",null,"The need to adapt tests is because tests must issue correct results regardless of the run conditions."),(0,o.kt)("p",null,"\u8c03\u6574\u6d4b\u8bd5\u7684\u9700\u8981\u662f\u56e0\u4e3a\u65e0\u8bba\u8fd0\u884c\u6761\u4ef6\u5982\u4f55\uff0c\u6d4b\u8bd5\u90fd\u5fc5\u987b\u5f97\u5230\u6b63\u786e\u7684\u7ed3\u679c\u3002"),(0,o.kt)("h5",{id:"\u8fd0\u884cuniswap-v2-core-\u5957\u4ef6\u7684\u66f4\u6539-changes-for-running-the-uniswap-v2-core-test-suite"},"\u8fd0\u884cUniswap-v2-core \u5957\u4ef6\u7684\u66f4\u6539 (Changes for Running the Uniswap-v2-core Test Suite)"),(0,o.kt)("p",null,"The following changes were made to run the Uniswap-v2-core test suite in the Neon EVM:"),(0,o.kt)("p",null,"\u4e3a\u4e86\u5728 Neon EVM \u4e2d\u8fd0\u884c Uniswap-v2-core \u6d4b\u8bd5\u5957\u4ef6\uff0c\u8fdb\u884c\u4e86\u4ee5\u4e0b\u66f4\u6539\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Increased timeouts when expanding contracts",(0,o.kt)("br",{parentName:"p"}),"\n","\u6269\u5c55\u5408\u7ea6\u7684\u8d85\u65f6\u65f6\u95f4\u589e\u52a0")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Changed ChainId\n\u6539\u53d8\u4e86\u94feID")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Replaced the rcp-request libraries, including the following: ",(0,o.kt)("inlineCode",{parentName:"p"},"Web3Provider")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"MockProvider")," replaced with ",(0,o.kt)("inlineCode",{parentName:"p"},"JsonRpcProvider"),(0,o.kt)("br",{parentName:"p"}),"\n","\u66ff\u6362\u4e86 rcp-request \u5e93\uff0c\u5305\u62ec\uff1a",(0,o.kt)("inlineCode",{parentName:"p"},"Web3Provider")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"MockProvider")," > \u66ff\u6362\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},"JsonRpcProvider"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Changed the test using the ",(0,o.kt)("strong",{parentName:"p"},"mineBlock()")," method",(0,o.kt)("br",{parentName:"p"}),"\n","\u4f7f\u7528",(0,o.kt)("strong",{parentName:"p"},"mineBlock()"),"\u65b9\u6cd5\u4fee\u6539\u6d4b\u8bd5")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Increased the number of re-requests in the ",(0,o.kt)("inlineCode",{parentName:"p"},"ethereum-waffle")," library for receiving transaction receipts, including the following:",(0,o.kt)("br",{parentName:"p"}),"\n","\u52a0\u4e86 ",(0,o.kt)("inlineCode",{parentName:"p"},"ethereum-waffle")," \u5e93\u4e2d\u63a5\u6536\u4ea4\u6613\u56de\u6267\u7684\u91cd\u65b0\u8bf7\u6c42\u6570\u91cf\uff0c\u5305\u62ec\uff1a"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// In the file  \nuniswap-v2-core/node_modules/@ethereum-waffle/chai/dist/cjs/matchers/emit.js  \n// the line  \nconst derivedPromise = promise.then((tx) => contract.provider.getTransactionReceipt(tx.hash) ).then((receipt) => {  \n// was replaced with  \nconst derivedPromise = promise.then((tx) => contract.provider.waitForTransaction(tx.hash, 3) ).then((receipt) => {  \n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Increased the value of ",(0,o.kt)("inlineCode",{parentName:"li"},"gasLimit")," in the ",(0,o.kt)("inlineCode",{parentName:"li"},"ethereum-waffle")," library.",(0,o.kt)("br",{parentName:"li"}),"\u589e\u52a0\u4e86 ",(0,o.kt)("inlineCode",{parentName:"li"},"ethereum-waffle")," \u5e93\u4e2d ",(0,o.kt)("inlineCode",{parentName:"li"},"gasLimit")," \u7684\u503c\u3002")),(0,o.kt)("h4",{id:"\u7b2c-3-\u9636\u6bb5---\u90e8\u7f72\u5408\u7ea6\u63a5\u53e3stage-3-deploying-the-uniswap-interface"},"\u7b2c 3 \u9636\u6bb5 - \u90e8\u7f72\u5408\u7ea6\u63a5\u53e3(Stage 3. Deploying the Uniswap Interface)"),(0,o.kt)("p",null,"After we have got the addresses of the contracts loaded into the Neon EVM, we can start deploying the Uniswap interface. It is necessary to specify that we use a real blockchain, and our contracts are located in this blockchain."),(0,o.kt)("p",null,"\u5728\u6211\u4eec\u5c06\u5408\u7ea6\u5730\u5740\u52a0\u8f7d\u5230 Neon EVM \u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u90e8\u7f72 Uniswap \u63a5\u53e3\u4e86\u3002\u6709\u5fc5\u8981\u6307\u5b9a\u6211\u4eec\u4f7f\u7528\u771f\u5b9e\u7684\u533a\u5757\u94fe\uff0c\u5e76\u4e14\u6211\u4eec\u7684\u5408\u7ea6\u5c31\u5728\u8be5\u533a\u5757\u94fe\u4e2d\u3002"),(0,o.kt)("h5",{id:"neonswap-\u63a5\u53e3\u7684\u66f4\u6539-changes-for-the-neonswap-interface"},"NeonSwap \u63a5\u53e3\u7684\u66f4\u6539 (Changes for the NeonSwap Interface)"),(0,o.kt)("p",null,"For the NeonSwap interface to function successfully in the Neon EVM, we made the following changes:"),(0,o.kt)("p",null,"\u4e3a\u4e86\u5728 Neon EVM \u4e2d\u6210\u529f\u8fd0\u884c NeonSwap \u63a5\u53e3\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u4ee5\u4e0b\u66f4\u6539\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Added a new testnet to the adapted NeonSwap interface code. The name of the new network with the new chain-ID is registered in all places where it was used:",(0,o.kt)("br",{parentName:"p"}),"\n","\u5411\u9002\u914d\u540e\u7684 NeonSwap \u63a5\u53e3\u4ee3\u7801\u6dfb\u52a0\u6d4b\u8bd5\u7f51\u3002\u5177\u6709\u65b0\u94fe ID > \u7684\u65b0\u7f51\u7edc\u7684\u540d\u79f0\u5df2\u5728\u6240\u6709\u4f7f\u7528\u5b83\u7684\u5730\u65b9\u6ce8\u518c\uff1a")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Added ",(0,o.kt)("inlineCode",{parentName:"p"},"ChainId LOCAL")," to dependent libraries and sources.",(0,o.kt)("br",{parentName:"p"}),"\n","\u4f9d\u8d56\u5e93\u548c\u6e90\u65b0\u589e",(0,o.kt)("inlineCode",{parentName:"p"},"ChainId LOCAL"),"\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"ChainID, url was specified in the .env file.",(0,o.kt)("br",{parentName:"p"}),"\n","ChainID, url \u5728.env \u6587\u4ef6\u4e2d\u6307\u5b9a\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"For the new network, a set of the loaded contracts was registered. In the directory ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),", the addresses of contracts in the sources and dependent libraries were replaced.",(0,o.kt)("br",{parentName:"p"}),"\n","\u5bf9\u4e8e\u65b0\u7f51\u7edc\uff0c\u4e00\u7ec4\u52a0\u8f7d\u7684\u5408\u7ea6\u4e5f\u88ab\u6ce8\u518c\u3002\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," > \u76ee\u5f55\u4e2d\uff0c\u66ff\u6362\u4e86\u6e90\u548c\u4f9d\u8d56\u5e93\u4e2d\u7684\u5408\u7ea6\u5730\u5740\u3002"))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"More details",(0,o.kt)("br",{parentName:"p"}),"\n","\u66f4\u591a\u7ec6\u8282"),(0,o.kt)("p",{parentName:"blockquote"},"A quick guide to using NeonSwap can be found in How to Swap ERC-20 Tokens."),(0,o.kt)("p",{parentName:"blockquote"},"\u4e00\u4e2a\u5173\u4e8e\u4f7f\u7528NeonSwap\u7684\u5feb\u901f\u5411\u5bfc\u53ef\u4ee5\u5728 How to Swap ERC-20 Tokens \u627e\u5230"),(0,o.kt)("p",{parentName:"blockquote"},"All changes we made for porting the Uniswap service to the Neon EVM can be found in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/neonlabsorg/uniswap-v2-core"},"Uniswap-v2-core Repository"),".  "),(0,o.kt)("p",{parentName:"blockquote"},"\u6211\u4eec\u4e3a\u5c06 Uniswap \u670d\u52a1\u79fb\u690d\u5230 Neon EVM \u6240\u505a\u7684\u6240\u6709\u66f4\u6539\u90fd\u53ef\u4ee5\u5728 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/neonlabsorg/uniswap-v2-core"},"Uniswap-v2-core Repository"),"\u5b58\u50a8\u5e93\u4e2d\u627e\u5230\u3002")))}h.isMDXComponent=!0}}]);