"use strict";(self.webpackChunkneonwp=self.webpackChunkneonwp||[]).push([[4678],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return f}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),f=a,h=m["".concat(u,".").concat(f)]||m[f]||p[f]||i;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7740:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return f},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],l={sidebar_position:5,title:"Neon\u548c\u4ee5\u592a\u574agas\u8ba1\u7b97\u5668\u7ed3\u679c\u4e0d\u540c(Neon and Ethereum Gas Calculators give different Results)"},u=void 0,s={unversionedId:"09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results",id:"09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results",title:"Neon\u548c\u4ee5\u592a\u574agas\u8ba1\u7b97\u5668\u7ed3\u679c\u4e0d\u540c(Neon and Ethereum Gas Calculators give different Results)",description:"\u95ee\u9898(Problem)",source:"@site/docs/09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results.md",sourceDirName:"09Architecture/05Architectural Limitations",slug:"/09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results",permalink:"/neonwp/09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/09Architecture/05Architectural Limitations/05Neon and Ethereum Gas Calculators give different Results.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Neon\u548c\u4ee5\u592a\u574agas\u8ba1\u7b97\u5668\u7ed3\u679c\u4e0d\u540c(Neon and Ethereum Gas Calculators give different Results)"},sidebar:"tutorialSidebar",previous:{title:"\u6743\u76ca\u8bc1\u660e(Proof-of-Stake)",permalink:"/neonwp/09Architecture/05Architectural Limitations/04Neon and Ethereum Gas Calculators give different Results"},next:{title:"Neon EVM \u4e0d\u652f\u6301\u7684\u51fd\u6570(Unsupported Functions in Neon EVM)",permalink:"/neonwp/09Architecture/05Architectural Limitations/06Unsupported Functions in Neon EVM"}},c={},p=[{value:"\u95ee\u9898(Problem)",id:"\u95ee\u9898problem",level:4},{value:"Bug\u4f55\u65f6\u4fee\u590d(When will the bug be fixed)",id:"bug\u4f55\u65f6\u4fee\u590dwhen-will-the-bug-be-fixed",level:4}],m={toc:p};function f(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h4",{id:"\u95ee\u9898problem"},"\u95ee\u9898(Problem)"),(0,i.kt)("p",null,"In Neon EVM, a calculator is implemented to account the gas consumption. Despite the fact that this calculator is implemented in the same way as in Ethereum, sometimes it shows different results in gas calculations on tests."),(0,i.kt)("p",null,"\u5728 Neon EVM \u4e2d\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8ba1\u7b97\u5668\u6765\u8ba1\u7b97gas\u6d88\u8017\u3002\u5c3d\u7ba1\u8fd9\u4e2a\u8ba1\u7b97\u5668\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e0e\u4ee5\u592a\u574a\u76f8\u540c\uff0c\u4f46\u6709\u65f6\u5b83\u4f1a\u5728\u6d4b\u8bd5\u4e2d\u663e\u793a\u4e0d\u540c\u7684gas\u8ba1\u7b97\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"Since contracts for Neon EVM can be created using various languages (including Solidity/Viper/others), these contracts can implement their own gas counting method."),(0,i.kt)("p",null,"\u7531\u4e8e Neon EVM \u7684\u5408\u7ea6\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u8bed\u8a00(\u5305\u62ec Solidity/Viper/\u5176\u4ed6)\u521b\u5efa\uff0c\u8fd9\u4e9b\u5408\u7ea6\u53ef\u4ee5\u5b9e\u73b0\u81ea\u5df1\u7684 gas \u8ba1\u7b97\u65b9\u6cd5\u3002"),(0,i.kt)("p",null,"Let's assume that the Ethereum network contract implements the following operations:"),(0,i.kt)("p",null,"\u5047\u8bbe\u4ee5\u592a\u574a\u7f51\u7edc\u5408\u7ea6\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u64cd\u4f5c\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculation of gas consumption using their own methods.",(0,i.kt)("br",{parentName:"p"}),"\n","\u7528\u81ea\u5df1\u7684\u65b9\u6cd5\u8ba1\u7b97\u6d88\u8017\u7684gas\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculation of gas consumption using the EVM calculator.",(0,i.kt)("br",{parentName:"p"}),"\n","\u4f7f\u7528 EVM \u8ba1\u7b97\u5668\u8ba1\u7b97\u6d88\u8017\u7684gas\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Comparison of the results obtained.",(0,i.kt)("br",{parentName:"p"}),"\n","\u6bd4\u8f83\u6240\u5f97\u7ed3\u679c"))),(0,i.kt)("p",null,"Since the results may be different, this method will not be able to work.",(0,i.kt)("br",{parentName:"p"}),"\n","\u7531\u4e8e\u7ed3\u679c\u53ef\u80fd\u4e0d\u540c\uff0c\u6b64\u65b9\u6cd5\u4e0d\u53ef\u884c\u3002"),(0,i.kt)("p",null,"At the moment, the following is known about this bug:",(0,i.kt)("br",{parentName:"p"}),"\n","\u76ee\u524d\uff0c\u6709\u5173\u6b64bug\u7684\u5df2\u77e5\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The error is in the Neon EVM code.",(0,i.kt)("br",{parentName:"p"}),"\n","\u9519\u8bef\u5b58\u5728\u4e8eNeon EVM \u4ee3\u7801\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The error does not affect the stability of the code.",(0,i.kt)("br",{parentName:"p"}),"\n","\u9519\u8bef\u4e0d\u5f71\u54cd\u4ee3\u7801\u7684\u7a33\u5b9a\u6027\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The error appears if:",(0,i.kt)("br",{parentName:"p"}),"\n","\u8be5\u9519\u8bef\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u590d\u73b0\uff1a"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"a contract independently calculates gas consumption.",(0,i.kt)("br",{parentName:"p"}),"\n","\u667a\u80fd\u5408\u7ea6\u72ec\u7acb\u8ba1\u7b97gas\u6d88\u8017")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'in the contract, the calculation is checked with issuing a message like this: "the gas has been calculated correctly".',(0,i.kt)("br",{parentName:"p"}),"\n","\u5728\u5408\u7ea6\u4e2d\uff0c\u901a\u8fc7\u53d1\u51fa\u201cgas\u5df2\u88ab\u6b63\u786e\u8ba1\u7b97\u201d\u7684\u6d88\u606f\u6765\u68c0\u67e5\u8ba1\u7b97\u3002"))))),(0,i.kt)("p",null,"Due to a bug in the Neon EVM code, the result of such checks may be incorrect.",(0,i.kt)("br",{parentName:"p"}),"\n","\u7531\u4e8e Neon EVM \u4ee3\u7801\u4e2d\u7684\u9519\u8bef\uff0c\u6b64\u7c7b\u68c0\u67e5\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u6b63\u786e\u3002"),(0,i.kt)("h4",{id:"bug\u4f55\u65f6\u4fee\u590dwhen-will-the-bug-be-fixed"},"Bug\u4f55\u65f6\u4fee\u590d(When will the bug be fixed)"),(0,i.kt)("p",null,"Investigating and fixing the bug will start after MVP on Mainnet.",(0,i.kt)("br",{parentName:"p"}),"\n","\u8c03\u67e5\u548c\u4fee\u590dbug\u5c06\u5728\u4e3b\u7f51\u4e0a MVP \u4e4b\u540e\u5f00\u59cb\u3002"))}f.isMDXComponent=!0}}]);