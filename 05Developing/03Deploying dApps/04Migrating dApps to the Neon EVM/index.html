<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Neon Docs" href="/neonwp/opensearch.xml"><title data-rh="true">向Neon EVM迁移dApps (Migrating dApps to the Neon EVM) | Neon Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="向Neon EVM迁移dApps (Migrating dApps to the Neon EVM) | Neon Docs"><meta data-rh="true" name="description" content="The purpose of this document is to demonstrate to Ethereum users how easily their dApps can be ported to the Neon EVM. Using Neon Swap as an example/, we wil show you how to run dApps on Solana without any software code changes."><meta data-rh="true" property="og:description" content="The purpose of this document is to demonstrate to Ethereum users how easily their dApps can be ported to the Neon EVM. Using Neon Swap as an example/, we wil show you how to run dApps on Solana without any software code changes."><link data-rh="true" rel="icon" href="/neonwp/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM"><link data-rh="true" rel="alternate" href="https://github.com/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKGRMS168A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/neonwp/assets/css/styles.366033d9.css">
<link rel="preload" href="/neonwp/assets/js/runtime~main.b330dfd2.js" as="script">
<link rel="preload" href="/neonwp/assets/js/main.ca07df00.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/neonwp/"><div class="navbar__logo"><img src="/neonwp/img/neonnew_svg.svg" alt=" " class="themedImage_W2Cr themedImage--light_TfLj"><img src="/neonwp/img/neonnew_svg.svg" alt=" " class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Neon EVM技术文档中英双语对照版(Neon EVM Doc ENG-CHN)</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Chainguys" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neonwp/">版权声明（Copyright Notice）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/01About/01Introduction">关于(About)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/02Wallets/01settingup">钱包(Wallets)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/03Explorers/01neonscan">浏览器 (Explorers)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/04tokentransfer/01NeonPass Overview">代币传输 (Tokens Transferring)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/neonwp/05Developing/01Getting Started">开发 (Developing)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/01Getting Started">准备开始 (Getting Started)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/neonwp/05Developing/02Setting up Environment/01Choosing a Neon Proxy">设置环境 (Setting up Environment)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/01iUsing Remix">部署Dapp (Deploying dApps)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/01iUsing Remix">使用Remix (Using Remix)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/02Using Truffle">使用Truffle (Using Truffle)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/03Using Hardhat">使用Hardhat (Using Hardhat)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM">向Neon EVM迁移dApps (Migrating dApps to the Neon EVM)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/05Interacting with SPL Tokens">与SPL代币交互 (Interacting with SPL Tokens)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/neonwp/05Developing/03Deploying dApps/06Using ERC20 Tokens">使用ERC-20代币 (Using ERC-20 Tokens)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/neonwp/05Developing/04Using utilities/01NeonScan">使用公共程序 (Using utilities)</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/06operating/01OR">运营 (Operating)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/07gov/01Governance Overview">社区治理 (Governance)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/08env/01Solana Cluster">环境(Environment)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/09Architecture/01Neon EVM Architecture Overview">架构 (Architecture)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/10faq/01What is Neon">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/11wp/wp">Neon白皮书(Neon Whitepaper)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/neonwp/12其他补充/01Transaction Value token">其他信息(additional information)</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/neonwp/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">开发 (Developing)</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">部署Dapp (Deploying dApps)</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">向Neon EVM迁移dApps (Migrating dApps to the Neon EVM)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>向Neon EVM迁移dApps (Migrating dApps to the Neon EVM)</h1></header><p>The purpose of this document is to demonstrate to Ethereum users how easily their dApps can be ported to the Neon EVM. Using <a href="/neonwp/01About/02Terminology#neonswap"><em>Neon Swap</em></a> as an example/, we wil show you how to run dApps on <a href="https://docs.solana.com/introduction" target="_blank" rel="noopener noreferrer"><em>Solana</em></a> without any software code changes.</p><p>本文档的目的是向以太坊用户展示他们的 dApp 可以多么容易地移植到 Neon EVM。以 <a href="/neonwp/01About/02Terminology#neonswap">Neon Swap</a> 为例，我们将向您展示如何在 <a href="https://docs.solana.com/introduction" target="_blank" rel="noopener noreferrer"><em>Solana</em></a>上运行 dApp，而无需更改任何代码。</p><p>Every dApp includes a contract and a software supporting that contract. In the Neon EVM, all dApps are deployed via Neon proxies. To deploy a dApp, it needs to send a request to a proxy, after which the proxy will automatically deploy contracts of the dApp in the Neon EVM environment. Contracts are loaded into a chain, and the software is deployed on a separate server for providing users interaction with these contracts.</p><p>每个 dApp 都包含一个合约和支持该合约的软件。在 Neon EVM 中，所有 dApp 都通过 Neon 代理部署。部署 dApp 需要向代理发送请求，代理会自动在 Neon EVM 环境中部署 dApp 的合约。合约被加载到链上，软件则部署在单独的服务器上，来为用户与这些合约交互。</p><p>In this description we show you how you can port Uniswap services to the Neon EVM environment. Since we do not have native keys to Uniswap, we will use a fork of Uniswap-V2 called <a href="/neonwp/01About/02Terminology#neonswap">NeonSwap</a>.</p><p>在本描述中，我们将向您展示如何将 Uniswap 服务移植到 Neon EVM 环境。由于我们没有 Uniswap 的本地密钥，我们将使用 Uniswap-V2 的一个分支，称为 <a href="/neonwp/01About/02Terminology#neonswap">NeonSwap</a>。</p><p>Migrating dApps to the Neon EVM is done in three stages:<br>
<!-- -->迁移需要分3阶段：</p><ul><li><p>Stage 1 - Deploying contracts in a Neon EVM environment<br>
<!-- -->第 1 阶段 - 在 Neon EVM 环境中部署合约</p></li><li><p>Stage 2 - Checking if the deployed contracts work correctly<br>
<!-- -->第 2 阶段 - 检查部署的合约是否正常工作</p></li><li><p>Stage 3 - Deploying the interface of the contracts<br>
<!-- -->第 3 阶段 - 部署合约接口</p></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="第-1-阶段---在-neon-evm-环境中部署合约stage-1-deploying-contracts-in-a-neon-evm-environment">第 1 阶段 - 在 Neon EVM 环境中部署合约（Stage 1. Deploying Contracts in a Neon EVM Environment）<a class="hash-link" href="#第-1-阶段---在-neon-evm-环境中部署合约stage-1-deploying-contracts-in-a-neon-evm-environment" title="Direct link to heading">​</a></h4><p>Using NeonSwap as an example, we can demonstrate that no changes to software serving contracts are required to port dApps. Changes are made only to those components that are necessary for its operation on he Neon EVM.</p><p>以 NeonSwap 为例，我们可以证明迁移 dApp 不需要更改软件服务合约。只需要更改在 Neon EVM 上运行所需的组件。</p><p>The contracts are built by a typical Solidity compiler used in Ethereum. After compilation, all the necessary contracts are deployed on the Neon EVM using a Web3 proxy. This proxy provides a standard interface that Ethereum utilities and tools can use.</p><p>这些合约由以太坊中使用的典型 Solidity 编译器构建。编译后，所有必要的合约都使用 Web3 代理部署在 Neon EVM 上。该代理提供了以太坊实用程序和工具可以使用的标准接口。</p><p>For example, Uniswap includes the following list of contracts that need to be deployed:</p><p>例如，Uniswap 包括以下需要部署的合约列表：</p><ul><li>Governance  </li><li>Uniswap-v2-periphery  </li><li>Multicall  </li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="为部署合约的更改changes-for-deploying-contracts">为部署合约的更改(Changes for Deploying Contracts)<a class="hash-link" href="#为部署合约的更改changes-for-deploying-contracts" title="Direct link to heading">​</a></h5><p>When deploying Uniswap in Neon EVM contracts, we made the following changes to them:</p><p>在 Neon EVM 合约中部署 Uniswap 时，我们对其进行了以下更改：</p><ul><li><p>The timeout value was increased.<br>
<!-- -->超时值增加</p></li><li><p>The number of repeated requests for transaction recipes was increased:<br>
<!-- -->交易回执的重复请求次数增加：</p></li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// The call  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    wait factoryV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createExchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">WETHPartner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> overrides</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// was replaced with  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> id </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> factoryV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createExchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">WETHPartner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> overrides</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> receipt </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> provider</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">waitForTransaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li>Added the <code>deploy contracts()</code> method.<br>添加<code>deploy contracts()</code> 方法</li></ul><p>Due to the fact that we did not have native keys to Uniswap, we had to change the addresses of the following uploaded contracts:</p><p>由于我们没有 Uniswap 的本地密钥，我们不得不更改以下上传合约的地址：</p><ul><li><p>UNI_ADDRESS</p></li><li><p>TIMELOCK_ADDRESS</p></li><li><p>GOVERNANCE_ADDRESS</p></li><li><p>MULTICALL_ADDRESS</p></li><li><p>MIGRATOR_ADDRESS</p></li><li><p>FACTORY_ADDRESS</p></li><li><p>ROUTER1_ADDRESS</p></li><li><p>ROUTER_ADDRESS</p></li><li><p>V1_FACTORY_ADDRESS</p></li><li><p>WETH_ADDRESS</p></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="第-2-阶段---检查部署的合约是否正常工作-stage-2-check-if-the-deployed-contracts-work-correctly">第 2 阶段 - 检查部署的合约是否正常工作 (Stage 2. Check if the Deployed Contracts Work Correctly)<a class="hash-link" href="#第-2-阶段---检查部署的合约是否正常工作-stage-2-check-if-the-deployed-contracts-work-correctly" title="Direct link to heading">​</a></h4><p>Contract health checks are performed in a real chain, not in a test environment, which is fully managed.</p><p>合约的健康检查在真正的链中执行，而不是在完全托管的测试环境中执行。</p><p>Unlike the test environment, in a real working chain the range of test operations cannot be performed in full. (For example, operations such as generating a block with a specified number of transactions are excluded.) In a chain, all operations rely on real-time, and a user checking the contracts cannot influence the block generation.</p><p>与测试环境不同，在真实的工作链中，测试操作的范围不能全部执行。（例如，不包括生成具有指定交易数量的块等操作。）在链中，所有操作都依赖于实时，用户检查合约不能影响块的生成。</p><p>To test NeonSwap, we use the entire set of Uniswap-v2-core tests available in their repository for testing on Ethereum. The method of running these tests has been changed. Before running the tests, it is indicated that the deployment of contracts, calls to their methods, as well as testing takes place not in the test framework, but in the real blockchain.</p><p>为了测试 NeonSwap，我们使用存储库中可用的整套 Uniswap-v2-core，在以太坊上进行测试。运行这些测试的方法已更改。在运行测试之前，需要表明：合约的部署、方法的调用以及测试不是在测试框架中进行，而是在真正的区块链中进行。</p><blockquote><p>For testing, we use an unmanaged environment. However, in Uniswap-v2-core tests (in contracts), there are sections of program code that contain environment management. In these pieces, we were able to successfully replace the environment management to expectation for a reaction from a chain. That is, where the block is to be generated, a delay is set. Then an action is performed and the reaction of the contract is evaluated; namely, whether it meets the expectation or not. At the same time, we believe that the number of blocks produced may be different.</p><p>对于测试，我们使用非托管环境。但是，在 Uniswap-v2-core 测试中（在合约中），有部分程序代码包含环境管理。在这些代码中，我们能够成功地将环境管理替换为对链的期望。也就是说，在要生成块的地方设置延迟。然后执行一个动作并评估合约的反应；即其是否符合预期。同时，我们认为出块的数量可能会有所不同。</p></blockquote><p>The need to adapt tests is because tests must issue correct results regardless of the run conditions.</p><p>调整测试的需要是因为无论运行条件如何，测试都必须得到正确的结果。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="运行uniswap-v2-core-套件的更改-changes-for-running-the-uniswap-v2-core-test-suite">运行Uniswap-v2-core 套件的更改 (Changes for Running the Uniswap-v2-core Test Suite)<a class="hash-link" href="#运行uniswap-v2-core-套件的更改-changes-for-running-the-uniswap-v2-core-test-suite" title="Direct link to heading">​</a></h5><p>The following changes were made to run the Uniswap-v2-core test suite in the Neon EVM:</p><p>为了在 Neon EVM 中运行 Uniswap-v2-core 测试套件，进行了以下更改：</p><ul><li><p>Increased timeouts when expanding contracts<br>
<!-- -->扩展合约的超时时间增加</p></li><li><p>Changed ChainId
改变了链ID</p></li><li><p>Replaced the rcp-request libraries, including the following: <code>Web3Provider</code> and <code>MockProvider</code> replaced with <code>JsonRpcProvider</code><br>
<!-- -->替换了 rcp-request 库，包括：<code>Web3Provider</code> 和 <code>MockProvider</code> &gt; 替换为 <code>JsonRpcProvider</code></p></li><li><p>Changed the test using the <strong>mineBlock()</strong> method<br>
<!-- -->使用<strong>mineBlock()</strong>方法修改测试</p></li><li><p>Increased the number of re-requests in the <code>ethereum-waffle</code> library for receiving transaction receipts, including the following:<br>
<!-- -->加了 <code>ethereum-waffle</code> 库中接收交易回执的重新请求数量，包括：</p></li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// In the file  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uniswap</span><span class="token operator">-</span><span class="token plain">v2</span><span class="token operator">-</span><span class="token plain">core</span><span class="token operator">/</span><span class="token plain">node_modules</span><span class="token operator">/</span><span class="token plain">@ethereum</span><span class="token operator">-</span><span class="token plain">waffle</span><span class="token operator">/</span><span class="token plain">chai</span><span class="token operator">/</span><span class="token plain">dist</span><span class="token operator">/</span><span class="token plain">cjs</span><span class="token operator">/</span><span class="token plain">matchers</span><span class="token operator">/</span><span class="token plain">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">js</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// the line  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> derivedPromise </span><span class="token operator">=</span><span class="token plain"> promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">tx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> contract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">provider</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getTransactionReceipt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">receipt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// was replaced with  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> derivedPromise </span><span class="token operator">=</span><span class="token plain"> promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">tx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> contract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">provider</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">waitForTransaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">receipt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li>Increased the value of <code>gasLimit</code> in the <code>ethereum-waffle</code> library.<br>增加了 <code>ethereum-waffle</code> 库中 <code>gasLimit</code> 的值。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="第-3-阶段---部署合约接口stage-3-deploying-the-uniswap-interface">第 3 阶段 - 部署合约接口(Stage 3. Deploying the Uniswap Interface)<a class="hash-link" href="#第-3-阶段---部署合约接口stage-3-deploying-the-uniswap-interface" title="Direct link to heading">​</a></h4><p>After we have got the addresses of the contracts loaded into the Neon EVM, we can start deploying the Uniswap interface. It is necessary to specify that we use a real blockchain, and our contracts are located in this blockchain.</p><p>在我们将合约地址加载到 Neon EVM 后，我们就可以开始部署 Uniswap 接口了。有必要指定我们使用真实的区块链，并且我们的合约就在该区块链中。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="neonswap-接口的更改-changes-for-the-neonswap-interface">NeonSwap 接口的更改 (Changes for the NeonSwap Interface)<a class="hash-link" href="#neonswap-接口的更改-changes-for-the-neonswap-interface" title="Direct link to heading">​</a></h5><p>For the <a href="/neonwp/01About/02Terminology#neonswap">NeonSwap</a> interface to function successfully in the Neon EVM, we made the following changes:</p><p>为了在 Neon EVM 中成功运行 <a href="/neonwp/01About/02Terminology#neonswap">NeonSwap</a> 接口，我们进行了以下更改:  </p><ul><li><p>Added a new testnet to the adapted NeonSwap interface code. The name of the new network with the new chain-ID is registered in all places where it was used:<br>
<!-- -->向适配后的 NeonSwap 接口代码添加测试网。具有新链 ID &gt; 的新网络的名称已在所有使用它的地方注册:  </p><ul><li><p>Added <code>ChainId LOCAL</code> to dependent libraries and sources.<br>
<!-- -->依赖库和源新增<code>ChainId LOCAL</code>。</p></li><li><p>ChainID, url was specified in the .env file.<br>
<!-- -->ChainID, url 在.env 文件中指定。</p></li></ul></li><li><p>For the new network, a set of the loaded contracts was registered. In the directory <code>node_modules</code>, the addresses of contracts in the sources and dependent libraries were replaced.<br>
<!-- -->对于新网络，一组加载的合约也被注册。在 <code>node_modules</code> &gt; 目录中，替换了源和依赖库中的合约地址。</p></li></ul><blockquote><p>More details<br>
<!-- -->更多细节</p><p>A quick guide to using NeonSwap can be found in How to Swap ERC-20 Tokens.</p><p>一个关于使用NeonSwap的快速向导可以在 How to Swap ERC-20 Tokens 找到</p><p>All changes we made for porting the Uniswap service to the Neon EVM can be found in the <a href="https://github.com/neonlabsorg/uniswap-v2-core" target="_blank" rel="noopener noreferrer">Uniswap-v2-core Repository</a>.  </p><p>我们为将 Uniswap 服务移植到 Neon EVM 所做的所有更改都可以在 <a href="https://github.com/neonlabsorg/uniswap-v2-core" target="_blank" rel="noopener noreferrer">Uniswap-v2-core Repository</a>存储库中找到。</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/05Developing/03Deploying dApps/04Migrating dApps to the Neon EVM.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/neonwp/05Developing/03Deploying dApps/03Using Hardhat"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">使用Hardhat (Using Hardhat)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/neonwp/05Developing/03Deploying dApps/05Interacting with SPL Tokens"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">与SPL代币交互 (Interacting with SPL Tokens)</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第-1-阶段---在-neon-evm-环境中部署合约stage-1-deploying-contracts-in-a-neon-evm-environment" class="table-of-contents__link toc-highlight">第 1 阶段 - 在 Neon EVM 环境中部署合约（Stage 1. Deploying Contracts in a Neon EVM Environment）</a><ul><li><a href="#为部署合约的更改changes-for-deploying-contracts" class="table-of-contents__link toc-highlight">为部署合约的更改(Changes for Deploying Contracts)</a></li></ul></li><li><a href="#第-2-阶段---检查部署的合约是否正常工作-stage-2-check-if-the-deployed-contracts-work-correctly" class="table-of-contents__link toc-highlight">第 2 阶段 - 检查部署的合约是否正常工作 (Stage 2. Check if the Deployed Contracts Work Correctly)</a><ul><li><a href="#运行uniswap-v2-core-套件的更改-changes-for-running-the-uniswap-v2-core-test-suite" class="table-of-contents__link toc-highlight">运行Uniswap-v2-core 套件的更改 (Changes for Running the Uniswap-v2-core Test Suite)</a></li></ul></li><li><a href="#第-3-阶段---部署合约接口stage-3-deploying-the-uniswap-interface" class="table-of-contents__link toc-highlight">第 3 阶段 - 部署合约接口(Stage 3. Deploying the Uniswap Interface)</a><ul><li><a href="#neonswap-接口的更改-changes-for-the-neonswap-interface" class="table-of-contents__link toc-highlight">NeonSwap 接口的更改 (Changes for the NeonSwap Interface)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/neonwp/">Doc list</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/Chainguys" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Chainguys" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/neonwp/assets/js/runtime~main.b330dfd2.js"></script>
<script src="/neonwp/assets/js/main.ca07df00.js"></script>
</body>
</html>